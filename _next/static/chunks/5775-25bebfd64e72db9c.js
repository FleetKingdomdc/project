"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5775],{12381:function(e,t,a){a.d(t,{z:function(){return o}});var i=a(57437),l=a(2265),d=a(37053),r=a(90535),n=a(93448);let s=(0,r.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=l.forwardRef((e,t)=>{let{className:a,variant:l,size:r,asChild:o=!1,...c}=e,m=o?d.g7:"button";return(0,i.jsx)(m,{className:(0,n.cn)(s({variant:l,size:r,className:a})),ref:t,...c})});o.displayName="Button"},4516:function(e,t,a){a.d(t,{Z:function(){return D}});var i=a(57437),l=a(2265),d=a(31047),r=a(79820),n=a(12381),s=a(92451),o=a(10407),c=a(19915),m=a(93448);function u(e){let{className:t,classNames:a,showOutsideDays:l=!0,...d}=e;return(0,i.jsx)(c._W,{showOutsideDays:l,className:(0,m.cn)("p-4 bg-card",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-6",caption:"flex justify-between pt-1 relative items-center px-1",caption_label:"text-sm font-medium",nav:"flex items-center",nav_button:(0,m.cn)("h-7 w-7 bg-transparent p-0 hover:opacity-70 text-muted-foreground"),nav_button_previous:"",nav_button_next:"",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[13px]",row:"flex w-full mt-2",cell:"text-center text-sm relative p-0 text-muted-foreground first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,m.cn)("h-9 w-9 p-0 font-normal rounded-full hover:bg-accent/40"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary-500 text-white hover:bg-primary-500 hover:text-white focus:bg-primary-500 focus:text-white",day_today:"text-primary-500 font-semibold",day_outside:"text-muted-foreground/50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{...t}=e;return(0,i.jsx)(s.Z,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,i.jsx)(o.Z,{className:"h-4 w-4"})}},...d})}u.displayName="Calendar";var p=a(27312);let f=p.fC,h=p.xz;p.ee;let _=l.forwardRef((e,t)=>{let{className:a,align:l="center",sideOffset:d=6,...r}=e;return(0,i.jsx)(p.h_,{children:(0,i.jsx)(p.VY,{ref:t,align:l,sideOffset:d,className:(0,m.cn)("z-50 w-72 rounded-xl border border-gray-200 bg-white p-5 text-gray-900 shadow-lg outline-none backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})})});_.displayName=p.VY.displayName;var g=a(6639),x=a(30092),v=a(29575),b=a(13422),y=a(14613),w=a(93541),T=a(71594),Z=a(24525);function N(e){let{data:t,columns:a,title:d,showCheckbox:r=!0,sorting:c,setSorting:m,globalFilter:u,setGlobalFilter:p,pagination:f,setPagination:h,rowSelection:_,setRowSelection:g}=e,x=l.useMemo(()=>r?[{id:"select",header:e=>{let{table:t}=e;return(0,i.jsx)("input",{type:"checkbox",checked:t.getIsAllRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler(),className:"rounded border-gray-300"})},cell:e=>{let{row:t}=e;return(0,i.jsx)("input",{type:"checkbox",checked:t.getIsSelected(),onChange:t.getToggleSelectedHandler(),className:"rounded border-gray-300"})}},...a]:a,[a,r]),v=(0,T.b7)({data:t,columns:x,getCoreRowModel:(0,Z.sC)(),getPaginationRowModel:(0,Z.G_)(),getSortedRowModel:(0,Z.tj)(),getFilteredRowModel:(0,Z.vL)(),state:{sorting:c,globalFilter:u,pagination:f,rowSelection:_},enableRowSelection:!0,onRowSelectionChange:g,onSortingChange:m,onGlobalFilterChange:p,onPaginationChange:h});return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h3",{className:"text-base px-6",children:d}),(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"w-full border-collapse divide-y divide-border",children:[(0,i.jsx)("thead",{className:"bg-accent text-muted-foreground",children:v.getHeaderGroups().map(e=>(0,i.jsx)("tr",{className:"border-b text-left text-sm",children:e.headers.map(e=>(0,i.jsx)("th",{className:"px-6 py-3 whitespace-nowrap",children:e.isPlaceholder?null:(0,T.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,i.jsx)("tbody",{className:"divide-y divide-border text-muted-foreground",children:v.getRowModel().rows.map(e=>(0,i.jsx)("tr",{className:"text-sm",children:e.getVisibleCells().map(e=>(0,i.jsx)("td",{className:"px-6 py-3 whitespace-nowrap",children:(0,T.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}),(0,i.jsxs)("div",{className:"flex flex-row items-center justify-start md:justify-end gap-4 p-4 md:p-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[(0,i.jsx)("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:"Rows per page:"}),(0,i.jsx)("select",{className:"border border-border bg-accent rounded px-2 py-1",value:f.pageSize,onChange:e=>h({...f,pageSize:Number(e.target.value)}),children:[5,10,15,20,25,30].map(e=>(0,i.jsx)("option",{value:e,className:"bg-card text-muted-foreground",children:e},e))})]}),(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:[f.pageIndex*f.pageSize+1,"-",Math.min((f.pageIndex+1)*f.pageSize,t.length)," ","of ",t.length]}),(0,i.jsxs)("div",{className:"flex gap-1",children:[(0,i.jsx)(n.z,{variant:"outline",onClick:()=>h({...f,pageIndex:f.pageIndex-1}),disabled:0===f.pageIndex,className:"p-1",children:(0,i.jsx)(s.Z,{size:16})}),(0,i.jsx)(n.z,{variant:"outline",onClick:()=>h({...f,pageIndex:f.pageIndex+1}),disabled:(f.pageIndex+1)*f.pageSize>=t.length,className:"p-1",children:(0,i.jsx)(o.Z,{size:16})})]})]})]})]})}var j=a(13520);function D(e){let{title:t,sections:a,showCheckbox:s=!0,onDateRangeChange:o,initialStartDate:c=new Date(new Date().setMonth(new Date().getMonth()-1)),initialEndDate:p=new Date,exportFileName:T,transformExportData:Z}=e,[D,k]=l.useState(c),[S,C]=l.useState(p),[I,M]=l.useState("Custom"),[K,z]=l.useState([]),[P,R]=l.useState(""),[U,E]=l.useState({pageIndex:0,pageSize:5}),[F,L]=l.useState({}),B=e=>{let t,a;M(e);let i=new Date;switch(e){case"Today":t=(0,g.Z)(i),a=(0,x.Z)(i);break;case"Yesterday":t=(0,g.Z)((0,v.Z)(i,1)),a=(0,x.Z)((0,v.Z)(i,1));break;case"Last Week":t=(0,g.Z)((0,b.Z)(i,1)),a=(0,x.Z)(i);break;case"Last Month":t=(0,g.Z)((0,y.Z)(i,1)),a=(0,x.Z)(i);break;default:return}k(t),C(a),o&&o(t,a)},O=(e,t)=>{let a=t||null;"start"===e?k(a):C(a),M("Custom")},A=a.filter(e=>void 0!==e);return(0,i.jsxs)(r.Zb,{className:"w-full",children:[(0,i.jsxs)(r.Ol,{className:"border-b border-border space-y-6",children:[(0,i.jsx)("h2",{className:"text-lg",children:t}),(0,i.jsxs)("div",{className:"flex flex-col md:flex-row justify-between space-y-4 md:space-y-0 md:items-end",children:[(0,i.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-end gap-4",children:[(0,i.jsxs)("div",{className:"space-y-1 flex flex-col w-full md:w-auto",children:[(0,i.jsx)("label",{className:"text-sm",children:"Filter Start Date"}),(0,i.jsxs)(f,{children:[(0,i.jsx)(h,{asChild:!0,children:(0,i.jsxs)(n.z,{variant:"outline",className:(0,m.cn)("w-full md:w-[240px] justify-start text-left font-normal",!D&&"text-muted-foreground"),children:[(0,i.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),D?(0,w.Z)(D,"PPP"):(0,i.jsx)("span",{children:"Pick a date"})]})}),(0,i.jsx)(_,{className:"w-auto p-0",align:"start",children:(0,i.jsx)(u,{mode:"single",selected:D||void 0,onSelect:e=>O("start",e),disabled:e=>!!S&&e>S,initialFocus:!0})})]})]}),(0,i.jsxs)("div",{className:"space-y-1 flex flex-col w-full md:w-auto",children:[(0,i.jsx)("label",{className:"text-sm",children:"Filter End Date"}),(0,i.jsxs)(f,{children:[(0,i.jsx)(h,{asChild:!0,children:(0,i.jsxs)(n.z,{variant:"outline",className:(0,m.cn)("w-full md:w-[240px] justify-start text-left font-normal",!S&&"text-muted-foreground"),children:[(0,i.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),S?(0,w.Z)(S,"PPP"):(0,i.jsx)("span",{children:"Pick a date"})]})}),(0,i.jsx)(_,{className:"w-auto p-0",align:"start",children:(0,i.jsx)(u,{mode:"single",selected:S||void 0,onSelect:e=>O("end",e),disabled:e=>!!D&&e<D,initialFocus:!0})})]})]}),(0,i.jsx)(n.z,{className:"w-full md:w-auto bg-[hsl(var(--gradient-purple-start))] hover:bg-[hsl(var(--gradient-purple-end))] text-destructive-foreground shadow-md",onClick:()=>{D&&S&&(M("Custom"),o&&o(D,S))},disabled:!D||!S,children:"Search"})]}),(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:["Today","Yesterday","Last Week","Last Month","Custom"].map(e=>(0,i.jsx)(n.z,{variant:I===e?"default":"outline",onClick:()=>B(e),className:(0,m.cn)("px-4 py-2",I===e&&"bg-[hsl(var(--gradient-purple-start))] hover:bg-[hsl(var(--gradient-purple-end))] text-white"),children:e},e))})]})]}),(0,i.jsxs)(r.aY,{className:"px-0 py-6 space-y-6",children:[(0,i.jsxs)("div",{className:"flex flex-col-reverse md:flex-row items-start justify-between gap-4 md:items-center px-6",children:[(0,i.jsx)(n.z,{className:"w-full md:w-auto bg-[hsl(var(--gradient-purple-start))] hover:bg-[hsl(var(--gradient-purple-end))] text-destructive-foreground shadow-md",onClick:()=>{let e=Object.keys(F).filter(e=>F[e]).map(Number),i=[];e.length>0?a.forEach(t=>{let a=e.map(e=>t.data[e]).filter(Boolean);i=[...i,...a]}):i=a.flatMap(e=>e.data),Z&&(i=Z(i));let l=D&&S?"_".concat((0,w.Z)(D,"yyyy-MM-dd"),"_to_").concat((0,w.Z)(S,"yyyy-MM-dd")):"",d=T||"".concat(t.toLowerCase().replace(/\s+/g,"_")).concat(l);(0,j.j)({data:i,filename:d,sheetName:t,format:"xlsx"})},children:"Export xlsx"}),(0,i.jsx)("input",{type:"text",placeholder:"Search...",value:P,onChange:e=>R(e.target.value),className:"w-full md:w-64 px-3 py-2 border border-border rounded-md bg-card"})]}),A.map(e=>(0,i.jsx)(N,{data:e.data,columns:e.columns,title:e.title,showCheckbox:s,sorting:K,setSorting:z,globalFilter:P,setGlobalFilter:R,pagination:U,setPagination:E,rowSelection:F,setRowSelection:L},e.title))]})]})}},88363:function(e,t,a){a.d(t,{u:function(){return i}});let i=[{id:1,trip:1,start_idle_time:"2024-11-30T08:25:00Z",end_idle_time:"2024-11-30T08:40:00Z",timestamp:"2024-11-30T08:40:00Z",latitude:17.4147,longitude:78.3816},{id:2,trip:2,start_idle_time:"2024-11-30T09:15:00Z",end_idle_time:"2024-11-30T09:50:00Z",timestamp:"2024-11-30T09:50:00Z",latitude:17.4319,longitude:78.4073},{id:3,trip:3,start_idle_time:"2024-11-30T09:30:00Z",end_idle_time:"2024-11-30T09:45:00Z",timestamp:"2024-11-30T09:45:00Z",latitude:17.5326,longitude:78.2646},{id:4,trip:5,start_idle_time:"2024-11-30T10:20:00Z",end_idle_time:"2024-11-30T10:35:00Z",timestamp:"2024-11-30T10:35:00Z",latitude:17.2403,longitude:78.4294},{id:5,trip:7,start_idle_time:"2024-11-30T11:40:00Z",end_idle_time:"2024-11-30T11:55:00Z",timestamp:"2024-11-30T11:55:00Z",latitude:17.5453,longitude:78.5738},{id:6,trip:8,start_idle_time:"2024-11-30T11:45:00Z",end_idle_time:"2024-11-30T12:00:00Z",timestamp:"2024-11-30T12:00:00Z",latitude:17.6252,longitude:78.4801},{id:7,trip:9,start_idle_time:"2024-11-30T12:15:00Z",end_idle_time:"2024-11-30T12:25:00Z",timestamp:"2024-11-30T12:25:00Z",latitude:17.44,longitude:78.3489},{id:8,trip:2,start_idle_time:"2024-11-30T10:15:00Z",end_idle_time:"2024-11-30T10:25:00Z",timestamp:"2024-11-30T10:25:00Z",latitude:17.4325,longitude:78.408},{id:9,trip:5,start_idle_time:"2024-11-30T11:10:00Z",end_idle_time:"2024-11-30T11:20:00Z",timestamp:"2024-11-30T11:20:00Z",latitude:17.241,longitude:78.43},{id:10,trip:8,start_idle_time:"2024-11-30T12:30:00Z",end_idle_time:"2024-11-30T12:35:00Z",timestamp:"2024-11-30T12:35:00Z",latitude:17.626,longitude:78.481}]},11825:function(e,t,a){a.d(t,{_:function(){return i}});let i=[{id:1,trip:7,speed:45.2,start_speed_time:"2024-11-30T11:35:00Z",end_speed_time:"2024-11-30T11:45:00Z",timestamp:"2024-11-30T11:45:00Z",latitude:17.5453,longitude:78.5738},{id:2,trip:8,speed:95.5,start_speed_time:"2024-11-30T11:45:00Z",end_speed_time:"2024-11-30T12:00:00Z",timestamp:"2024-11-30T12:00:00Z",latitude:17.6252,longitude:78.4801},{id:3,trip:5,speed:85.2,start_speed_time:"2024-11-30T10:40:00Z",end_speed_time:"2024-11-30T10:50:00Z",timestamp:"2024-11-30T10:50:00Z",latitude:17.2403,longitude:78.4294},{id:4,trip:2,speed:42.5,start_speed_time:"2024-11-30T09:20:00Z",end_speed_time:"2024-11-30T09:30:00Z",timestamp:"2024-11-30T09:30:00Z",latitude:17.4319,longitude:78.4073},{id:5,trip:3,speed:58.5,start_speed_time:"2024-11-30T09:15:00Z",end_speed_time:"2024-11-30T09:25:00Z",timestamp:"2024-11-30T09:25:00Z",latitude:17.5326,longitude:78.2646},{id:6,trip:9,speed:82.3,start_speed_time:"2024-11-30T12:20:00Z",end_speed_time:"2024-11-30T12:30:00Z",timestamp:"2024-11-30T12:30:00Z",latitude:17.44,longitude:78.3489},{id:7,trip:6,speed:65.4,start_speed_time:"2024-11-30T10:40:00Z",end_speed_time:"2024-11-30T10:50:00Z",timestamp:"2024-11-30T10:50:00Z",latitude:17.6387,longitude:78.5622},{id:8,trip:1,speed:58.8,start_speed_time:"2024-11-30T08:30:00Z",end_speed_time:"2024-11-30T08:40:00Z",timestamp:"2024-11-30T08:40:00Z",latitude:17.4147,longitude:78.3816},{id:9,trip:5,speed:82.5,start_speed_time:"2024-11-30T11:00:00Z",end_speed_time:"2024-11-30T11:10:00Z",timestamp:"2024-11-30T11:10:00Z",latitude:17.241,longitude:78.43},{id:10,trip:8,speed:98.5,start_speed_time:"2024-11-30T12:15:00Z",end_speed_time:"2024-11-30T12:25:00Z",timestamp:"2024-11-30T12:25:00Z",latitude:17.626,longitude:78.481}]},12770:function(e,t,a){a.d(t,{B:function(){return h},x:function(){return _}});var i=a(2265),l=a(83591),d=a(79378),r=a(14080),n=a(11825),s=a(88363);let o=[{id:1,trip:1,odometer:55580.5,fuel_filled:35.8,bill_number:"HP/HYD/2024/1156",fuel_cost:3723.2,fuel_filled_time:"2024-11-30T07:45:00Z"},{id:2,trip:3,odometer:89725.7,fuel_filled:85.5,bill_number:"IOC/JDM/2024/3421",fuel_cost:7695,fuel_filled_time:"2024-11-30T08:45:00Z"},{id:3,trip:5,odometer:125435.8,fuel_filled:92.3,bill_number:"BP/SEC/2024/4532",fuel_cost:8307,fuel_filled_time:"2024-11-30T09:45:00Z"},{id:4,trip:8,odometer:102200.4,fuel_filled:75.5,bill_number:"HP/KOM/2024/5643",fuel_cost:6795,fuel_filled_time:"2024-11-30T11:15:00Z"},{id:5,trip:2,odometer:35830.2,fuel_filled:42.5,bill_number:"IOC/GCB/2024/6754",fuel_cost:4420,fuel_filled_time:"2024-11-30T08:15:00Z"},{id:6,trip:7,odometer:78925.8,fuel_filled:65.8,bill_number:"BP/UPL/2024/7865",fuel_cost:5922,fuel_filled_time:"2024-11-30T11:00:00Z"},{id:7,trip:9,odometer:45785.7,fuel_filled:45.2,bill_number:"HP/KUK/2024/8976",fuel_cost:4700.8,fuel_filled_time:"2024-11-30T11:45:00Z"},{id:8,trip:6,odometer:143455.4,fuel_filled:120.5,bill_number:"IOC/SHA/2024/9087",fuel_cost:10845,fuel_filled_time:"2024-11-30T10:15:00Z"},{id:9,trip:10,odometer:167895.6,fuel_filled:110.8,bill_number:"BP/PAT/2024/1098",fuel_cost:9972,fuel_filled_time:"2024-11-30T12:15:00Z"},{id:10,trip:4,odometer:28380.5,fuel_filled:38.5,bill_number:"HP/MAD/2024/2109",fuel_cost:4004,fuel_filled_time:"2024-11-30T09:15:00Z"}];var c=a(60529);let m=(e,t,a)=>{let i=new Date(e);return i>=t&&i<=a},u=(e,t)=>d.Q.filter(a=>a.created_at&&m(a.created_at,e,t)).map(e=>{let t=l.N.find(t=>t.id===e.driver),a=r.f.find(t=>t.id===e.vehicle);return{tripId:e.id,driverName:(null==t?void 0:t.fullname)||"Unknown",vehicleNumber:(null==a?void 0:a.vehicle_number)||"Unknown",startTime:e.start_time,endTime:e.end_time,status:e.end_time?"Completed":e.start_time?"In Progress":"Scheduled",distanceTravelled:e.distance_travelled||0,totalIdleTime:e.total_idle_time||0,scheduledStartTime:e.scheduled_start_time,isDelayed:!!e.start_time&&!!e.scheduled_start_time&&new Date(e.start_time)>new Date(e.scheduled_start_time)}}),p=(e,t)=>[...n._.filter(a=>a.timestamp&&m(a.timestamp,e,t)).map(e=>{let t=d.Q.find(t=>t.id===e.trip),a=t?l.N.find(e=>e.id===t.driver):null,i=t?r.f.find(e=>e.id===t.vehicle):null;return{alertId:e.id,tripId:e.trip,type:"Speed Violation",driverName:(null==a?void 0:a.fullname)||"Unknown",vehicleNumber:(null==i?void 0:i.vehicle_number)||"Unknown",speed:e.speed,timestamp:e.timestamp,location:"".concat(e.latitude,", ").concat(e.longitude),duration:e.start_speed_time&&e.end_speed_time?(new Date(e.end_speed_time).getTime()-new Date(e.start_speed_time).getTime())/6e4:0}}),...s.u.filter(a=>a.timestamp&&m(a.timestamp,e,t)).map(e=>{let t=d.Q.find(t=>t.id===e.trip),a=t?l.N.find(e=>e.id===t.driver):null,i=t?r.f.find(e=>e.id===t.vehicle):null;return{alertId:e.id,tripId:e.trip,type:"Extended Idle Time",driverName:(null==a?void 0:a.fullname)||"Unknown",vehicleNumber:(null==i?void 0:i.vehicle_number)||"Unknown",timestamp:e.timestamp,location:"".concat(e.latitude,", ").concat(e.longitude),duration:e.start_idle_time&&e.end_idle_time?(new Date(e.end_idle_time).getTime()-new Date(e.start_idle_time).getTime())/6e4:0}})],f=(e,t)=>{let a=o.filter(a=>a.fuel_filled_time&&m(a.fuel_filled_time,e,t)).map(e=>{let t=d.Q.find(t=>t.id===e.trip),a=t?r.f.find(e=>e.id===t.vehicle):null,i=t?l.N.find(e=>e.id===t.driver):null;return{reportId:e.id,type:"Fuel",tripId:e.trip,driverName:(null==i?void 0:i.fullname)||"Unknown",vehicleNumber:(null==a?void 0:a.vehicle_number)||"Unknown",vehicleType:(null==a?void 0:a.vehicle_type)||"Unknown",amount:e.fuel_cost||0,quantity:e.fuel_filled||0,odometer:e.odometer||0,timestamp:e.fuel_filled_time,billNumber:e.bill_number}}),i=c.o.filter(a=>a.maintenance_time&&m(a.maintenance_time,e,t)).map(e=>{let t=d.Q.find(t=>t.id===e.trip),a=t?r.f.find(e=>e.id===t.vehicle):null,i=t?l.N.find(e=>e.id===t.driver):null;return{reportId:e.id,type:"Maintenance",tripId:e.trip,driverName:(null==i?void 0:i.fullname)||"Unknown",vehicleNumber:(null==a?void 0:a.vehicle_number)||"Unknown",vehicleType:(null==a?void 0:a.vehicle_type)||"Unknown",serviceType:e.service_type,amount:e.bill_amount||0,odometer:e.odometer||0,timestamp:e.maintenance_time,serviceCenter:e.service_center_name,billNumber:e.bill_number}});return{fuelReports:a,maintenanceReports:i,summary:{totalFuelCost:a.reduce((e,t)=>e+t.amount,0),totalMaintenanceCost:i.reduce((e,t)=>e+t.amount,0),totalFuelQuantity:a.reduce((e,t)=>e+t.quantity,0),maintenanceCount:i.length,fuelTransactions:a.length}}},h={tripActivity:[{header:"Trip ID",accessorKey:"tripId"},{header:"Driver",accessorKey:"driverName"},{header:"Vehicle",accessorKey:"vehicleNumber"},{header:"Start Time",accessorKey:"startTime"},{header:"End Time",accessorKey:"endTime"},{header:"Status",accessorKey:"status"},{header:"Distance (km)",accessorKey:"distanceTravelled"},{header:"Idle Time (min)",accessorKey:"totalIdleTime"}],tripAlerts:[{header:"Alert ID",accessorKey:"alertId"},{header:"Trip ID",accessorKey:"tripId"},{header:"Type",accessorKey:"type"},{header:"Driver",accessorKey:"driverName"},{header:"Vehicle",accessorKey:"vehicleNumber"},{header:"Timestamp",accessorKey:"timestamp"},{header:"Duration (min)",accessorKey:"duration"},{header:"Location",accessorKey:"location"}],fuelMaintenance:[{header:"Report ID",accessorKey:"reportId"},{header:"Type",accessorKey:"type"},{header:"Trip ID",accessorKey:"tripId"},{header:"Driver",accessorKey:"driverName"},{header:"Vehicle",accessorKey:"vehicleNumber"},{header:"Amount (â‚¹)",accessorKey:"amount"},{header:"Timestamp",accessorKey:"timestamp"},{header:"Bill Number",accessorKey:"billNumber"}]},_=()=>{let[e,t]=(0,i.useState)({startDate:new Date(new Date().setMonth(new Date().getMonth()-1)),endDate:new Date}),a=(0,i.useMemo)(()=>u(e.startDate,e.endDate),[e]);return{tripActivityData:a,tripAlertsData:(0,i.useMemo)(()=>p(e.startDate,e.endDate),[e]),fuelMaintenanceData:(0,i.useMemo)(()=>f(e.startDate,e.endDate),[e]),dateRange:e,updateDateRange:(e,a)=>{t({startDate:e,endDate:a})}}}},13520:function(e,t,a){a.d(t,{j:function(){return d}});var i=a(97853),l=a.n(i);let d=async e=>{let{data:t,filename:a="export",sheetName:i="Sheet1",format:d="xlsx",columnMapping:n={},includeColumns:s,excludeColumns:o=[],transformData:c,dateFormat:m="yyyy-mm-dd"}=e;if(!t.length){console.warn("No data to export");return}try{let e;let u=new(l()).Workbook,p=u.addWorksheet(i),f=Object.keys(t[0]),h=s||f,_=(h=h.filter(e=>!o.includes(e))).map(e=>({header:n[e]||String(e),key:String(e)}));p.columns=_;let g=t.map(e=>{let t=c?c(e):e,a={};return h.forEach(e=>{let i=t[e];i instanceof Date&&(i=r(i,m)),a[String(e)]=i}),a});p.addRows(g),p.columns.forEach(e=>{var t;if(!e)return;let a=0;null===(t=e.eachCell)||void 0===t||t.call(e,{includeEmpty:!0},e=>{let t=e.value?e.value.toString().length:10;t>a&&(a=t)}),e.width=Math.min(a+2,30)}),"csv"===d?(e=await u.csv.writeBuffer(),a="".concat(a,".csv")):(e=await u.xlsx.writeBuffer(),a="".concat(a,".xlsx"));let x=new Blob([e],{type:"csv"===d?"text/csv;charset=utf-8;":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),v=document.createElement("a");v.href=window.URL.createObjectURL(x),v.download=a,v.click(),window.URL.revokeObjectURL(v.href)}catch(e){throw console.error("Export failed:",e),Error("Failed to export data: ".concat(e))}},r=(e,t)=>{let a=new Date(e),i=a.getFullYear(),l=String(a.getMonth()+1).padStart(2,"0"),d=String(a.getDate()).padStart(2,"0");return t.replace("yyyy",i.toString()).replace("mm",l).replace("dd",d)}}}]);