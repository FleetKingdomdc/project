(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2952,5873],{52587:function(e,t,r){Promise.resolve().then(r.bind(r,36578))},22252:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(39763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},91723:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(39763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},73247:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(39763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},36578:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var s=r(57437),a=r(2265),l=r(29827),n=r(11713),d=r(21770),i=r(79820),c=r(33804),o=r(12381),u=r(69174),x=r(40279),m=r(15291),h=r(98151),f=r(91723),g=r(65302),j=r(40340),p=r(44794),b=r(22252),y=r(73247),N=r(36931),v=r(55873);async function w(){return(0,v.AU)()}async function C(e,t,r){return(0,v.E7)(e,t,r)}function k(){(0,h.N)();let e=(0,l.NL)(),[t,r]=(0,a.useState)(""),[v,k]=(0,a.useState)("all"),[Z,O]=(0,a.useState)(null),{data:_,isLoading:S,error:T}=(0,n.a)({queryKey:["orders"],queryFn:w}),{mutate:A,isPending:I}=(0,d.D)({mutationFn:e=>{let{id:t,status:r,location:s}=e;return C(t,r,s)},onSuccess:t=>{e.invalidateQueries({queryKey:["orders"]}),N.A.success("تم تحديث حالة الطلب ".concat(t.id," بنجاح"))},onError:e=>{N.A.error("خطأ في تحديث الطلب: ".concat(e.message))}}),R=(_||[]).filter(e=>{let r=e.id.toLowerCase().includes(t.toLowerCase())||e.fromCity.toLowerCase().includes(t.toLowerCase())||e.toCity.toLowerCase().includes(t.toLowerCase()),s="all"===v||e.status===v;return r&&s}),D=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"received":return"bg-blue-100 text-blue-800 border-blue-300";case"in_transit":return"bg-purple-100 text-purple-800 border-purple-300";case"delivered":return"bg-green-100 text-green-800 border-green-300";case"rejected":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},M=e=>{switch(e){case"pending":return(0,s.jsx)(f.Z,{className:"h-3 w-3"});case"received":return(0,s.jsx)(g.Z,{className:"h-3 w-3"});case"in_transit":return(0,s.jsx)(j.Z,{className:"h-3 w-3"});case"delivered":default:return(0,s.jsx)(p.Z,{className:"h-3 w-3"});case"rejected":return(0,s.jsx)(b.Z,{className:"h-3 w-3"})}},L=e=>({pending:"قيد المراجعة",received:"تم التأكيد",in_transit:"في الطريق",delivered:"تم التسليم",rejected:"مرفوض"})[e]||e,Y=(e,t)=>{A({id:e,status:t,location:"in_transit"===t?{lat:24.7136+(Math.random()-.5)*.1,lng:46.6753+(Math.random()-.5)*.1}:void 0})},z={total:(null==_?void 0:_.length)||0,pending:(null==_?void 0:_.filter(e=>"pending"===e.status).length)||0,received:(null==_?void 0:_.filter(e=>"received"===e.status).length)||0,in_transit:(null==_?void 0:_.filter(e=>"in_transit"===e.status).length)||0,delivered:(null==_?void 0:_.filter(e=>"delivered"===e.status).length)||0,rejected:(null==_?void 0:_.filter(e=>"rejected"===e.status).length)||0};return(0,s.jsxs)("div",{className:"p-4 space-y-6 max-w-7xl mx-auto",children:[(0,s.jsx)(i.Zb,{children:(0,s.jsx)(i.Ol,{children:(0,s.jsxs)(i.ll,{className:"flex items-center gap-3",children:[(0,s.jsx)(p.Z,{className:"h-6 w-6 text-blue-600"}),"لوحة تحكم الإدارة"]})})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[(0,s.jsx)(i.Zb,{children:(0,s.jsxs)(i.aY,{className:"p-4 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:z.total}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"إجمالي الطلبات"})]})}),(0,s.jsx)(i.Zb,{children:(0,s.jsxs)(i.aY,{className:"p-4 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:z.pending}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"قيد المراجعة"})]})}),(0,s.jsx)(i.Zb,{children:(0,s.jsxs)(i.aY,{className:"p-4 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:z.received}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"مؤكدة"})]})}),(0,s.jsx)(i.Zb,{children:(0,s.jsxs)(i.aY,{className:"p-4 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:z.in_transit}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"في الطريق"})]})}),(0,s.jsx)(i.Zb,{children:(0,s.jsxs)(i.aY,{className:"p-4 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:z.delivered}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"تم التسليم"})]})}),(0,s.jsx)(i.Zb,{children:(0,s.jsxs)(i.aY,{className:"p-4 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-red-600",children:z.rejected}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"مرفوضة"})]})})]}),(0,s.jsx)(i.Zb,{children:(0,s.jsx)(i.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(y.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(x.I,{placeholder:"البحث برقم الطلب أو المدينة...",value:t,onChange:e=>r(e.target.value),className:"pl-10 text-right"})]})}),(0,s.jsx)("div",{className:"w-full md:w-48",children:(0,s.jsxs)(m.Ph,{value:v,onValueChange:k,children:[(0,s.jsx)(m.i4,{children:(0,s.jsx)(m.ki,{placeholder:"تصفية حسب الحالة"})}),(0,s.jsxs)(m.Bw,{children:[(0,s.jsx)(m.Ql,{value:"all",children:"جميع الحالات"}),(0,s.jsx)(m.Ql,{value:"pending",children:"قيد المراجعة"}),(0,s.jsx)(m.Ql,{value:"received",children:"مؤكدة"}),(0,s.jsx)(m.Ql,{value:"in_transit",children:"في الطريق"}),(0,s.jsx)(m.Ql,{value:"delivered",children:"تم التسليم"}),(0,s.jsx)(m.Ql,{value:"rejected",children:"مرفوضة"})]})]})})]})})}),(0,s.jsx)(i.Zb,{children:(0,s.jsxs)(i.aY,{className:"p-0",children:[S&&(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"جاري التحميل..."})]}),T&&(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)(b.Z,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-sm text-red-600",children:String((null==T?void 0:T.message)||T)})]}),!S&&!T&&(0,s.jsxs)("div",{className:"overflow-x-auto",children:[(0,s.jsxs)(c.iA,{children:[(0,s.jsx)(c.xD,{children:(0,s.jsxs)(c.SC,{children:[(0,s.jsx)(c.ss,{className:"text-right",children:"رقم الطلب"}),(0,s.jsx)(c.ss,{className:"text-right",children:"المركبة"}),(0,s.jsx)(c.ss,{className:"text-right",children:"من"}),(0,s.jsx)(c.ss,{className:"text-right",children:"إلى"}),(0,s.jsx)(c.ss,{className:"text-right",children:"السعر"}),(0,s.jsx)(c.ss,{className:"text-right",children:"الحالة"}),(0,s.jsx)(c.ss,{className:"text-right",children:"الإجراءات"})]})}),(0,s.jsx)(c.RM,{children:R.map(e=>(0,s.jsxs)(c.SC,{className:"hover:bg-muted/50",children:[(0,s.jsx)(c.pj,{className:"font-medium text-right",children:e.id}),(0,s.jsx)(c.pj,{className:"text-right",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.carType}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:e.carModel})]})}),(0,s.jsx)(c.pj,{className:"text-right",children:e.fromCity}),(0,s.jsx)(c.pj,{className:"text-right",children:e.toCity}),(0,s.jsxs)(c.pj,{className:"text-right font-medium",children:[e.price," ريال"]}),(0,s.jsx)(c.pj,{className:"text-right",children:(0,s.jsxs)(u.C,{className:"".concat(D(e.status)," flex items-center gap-1 w-fit"),children:[M(e.status),L(e.status)]})}),(0,s.jsx)(c.pj,{className:"text-right",children:(0,s.jsxs)("div",{className:"flex gap-1 justify-end",children:[(0,s.jsx)(o.z,{variant:"outline",size:"sm",disabled:I||"received"===e.status,onClick:()=>Y(e.id,"received"),className:"text-xs",children:"تأكيد"}),(0,s.jsx)(o.z,{variant:"outline",size:"sm",disabled:I||"in_transit"===e.status,onClick:()=>Y(e.id,"in_transit"),className:"text-xs",children:"شحن"}),(0,s.jsx)(o.z,{variant:"outline",size:"sm",disabled:I||"delivered"===e.status,onClick:()=>Y(e.id,"delivered"),className:"text-xs",children:"تسليم"}),(0,s.jsx)(o.z,{variant:"destructive",size:"sm",disabled:I||"rejected"===e.status,onClick:()=>Y(e.id,"rejected"),className:"text-xs",children:"رفض"})]})})]},e.id))})]}),0===R.length&&!S&&(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)(p.Z,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"لا توجد طلبات"})]})]})]})})]})}},69174:function(e,t,r){"use strict";r.d(t,{C:function(){return d}});var s=r(57437);r(2265);var a=r(90535),l=r(93448);let n=(0,a.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)(n({variant:r}),t),...a})}},33804:function(e,t,r){"use strict";r.d(t,{RM:function(){return i},SC:function(){return c},iA:function(){return n},pj:function(){return u},ss:function(){return o},xD:function(){return d}});var s=r(57437),a=r(2265),l=r(93448);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto rounded-lg border border-gray-200 shadow-sm",children:(0,s.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",r),...a})})});n.displayName="Table";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("thead",{ref:t,className:(0,l.cn)("bg-gradient-to-r from-blue-50 to-indigo-50 [&_tr]:border-b [&_tr]:border-gray-200",r),...a})});d.displayName="TableHeader";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0 [&_tr]:border-b [&_tr]:border-gray-100",r),...a})});i.displayName="TableBody",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-gray-50/80 font-medium [&>tr]:last:border-b-0",r),...a})}).displayName="TableFooter";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-blue-50/50 data-[state=selected]:bg-blue-100",r),...a})});c.displayName="TableRow";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("th",{ref:t,className:(0,l.cn)("h-12 px-4 text-left align-middle font-semibold text-gray-700 [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...a})});o.displayName="TableHead";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("td",{ref:t,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...a})});u.displayName="TableCell",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-gray-500",r),...a})}).displayName="TableCaption"},55873:function(e,t,r){"use strict";r.d(t,{AU:function(){return c},E7:function(){return u},createOrder:function(){return o},mockAPI:function(){return i},trackOrder:function(){return x}});let s=e=>new Promise(t=>setTimeout(t,e)),a="fleet_orders",l=[{id:"ORD-1001",carType:"sedan",carModel:"toyota_camry",plateNumber:"ABC-1234",fromCity:"الرياض",toCity:"جدة",paymentMethod:"mada",price:500,status:"in_transit",createdAt:"2024-01-15T10:00:00Z",currentLocation:{lat:24.7136,lng:46.6753},customerInfo:{name:"أحمد محمد",phone:"+966501234567",email:"ahmed@example.com",fromAddress:"الرياض، حي الملز",toAddress:"جدة، حي الروضة",scheduledDate:"2024-01-15",scheduledTime:"14:00",packageType:"وثائق",specialInstructions:"التسليم للمكتب الرئيسي"}},{id:"ORD-1002",carType:"suv",carModel:"hyundai_tucson",plateNumber:"XYZ-5678",fromCity:"الدمام",toCity:"الرياض",paymentMethod:"card",price:400,status:"delivered",createdAt:"2024-01-14T08:30:00Z",currentLocation:{lat:24.7136,lng:46.6753},customerInfo:{name:"فاطمة علي",phone:"+966509876543",email:"fatima@example.com",fromAddress:"الدمام، حي الشاطئ",toAddress:"الرياض، حي النخيل",scheduledDate:"2024-01-14",scheduledTime:"16:00",packageType:"أجهزة إلكترونية",specialInstructions:"التعامل بحذر"}}];function n(){try{let e=localStorage.getItem(a);return e?JSON.parse(e):l}catch(e){return l}}function d(e){try{localStorage.setItem(a,JSON.stringify(e))}catch(e){console.warn("Failed to save orders to localStorage:",e)}}let i={getOrders:async()=>(await s(500),n()),async createOrder(e){await s(800);let t=n(),r={id:"ORD-".concat(Date.now()),fromCity:e.fromCity||"الرياض",toCity:e.toCity||"جدة",carType:e.carType||"sedan",carModel:e.carModel||"toyota_camry",plateNumber:e.plateNumber||"ABC-1234",paymentMethod:e.paymentMethod||"mada",price:e.price||500,status:"pending",createdAt:new Date().toISOString(),currentLocation:{lat:24.7136,lng:46.6753},customerInfo:e.customerInfo||{name:"عميل جديد",phone:"+966501234567",email:"customer@example.com",fromAddress:"الرياض",toAddress:"جدة",scheduledDate:new Date().toISOString().split("T")[0],scheduledTime:"14:00",packageType:"عام",specialInstructions:""}};return d([r,...t]),r},getOrderById:async e=>(await s(300),n().find(t=>t.id===e)||null),async updateOrderStatus(e,t,r){await s(600);let a=n(),l=a.findIndex(t=>t.id===e);if(-1===l)throw Error("Order not found");let i={...a[l],status:t,...r&&{currentLocation:r},updatedAt:new Date().toISOString()};return a[l]=i,d(a),i},async trackOrder(e){await s(400);let t=await this.getOrderById(e);if(!t)throw Error("Order not found");return t}},c=i.getOrders,o=i.createOrder;i.getOrderById;let u=i.updateOrderStatus,x=i.trackOrder;localStorage.getItem(a)||d(l)}},function(e){e.O(0,[6137,4154,6008,2033,5021,1713,6331,6233,2971,2117,1744],function(){return e(e.s=52587)}),_N_E=e.O()}]);